
wxWidgets & Code::Blocks Studio
##############################################################


:author: rex
:date: 2006-01-21T23:01:00+08:00
:modified: 2006-01-21T23:01:00+08:00
:status: published
:category: Coding
:tags: wxWidgets, IDE


<p>近来无事想写一个小程序，又不想花太多时间在UI上；就想起了一直关注的wxWidgets(以前叫wxWindows，据说是因为微软施压才改的名)。选用他的理由有三：</p><ol><li>只会C。。。</li><li>不想因为界面设计而花太多时间</li><li><ul><li>wxWidgets已经有了像<a href="http://wxglade.sourceforge.net/" target="_blank">wxGlade</a>这样的东东，画个简单的界面什么的足够了</li></ul></li><li>我的服务器已经都转换到了Linux；而桌面电脑随着时间的推移已经逐步的将常用的程序切换成了跨Windows/Linux的版本。所以学习一个跨平台的UI比较能够做到知识的保值</li><li>wxWidgets中的wxString类提供了统一的一个字符串操作界面。一些常用的文本处理函数不用再创建了；这个我喜欢</li><li>开源、免费！</li></ol><p><strong>下一步就是选择IDE</strong></p><p>主要焦点在<a href="http://www.parinyasoft.com/mingwstudio.html" target="_blank">MinGW Developer Studio</a>和<a href="http://www.codeblocks.org/" target="_blank">Code::Blocks Studio</a>这两个跨平台(都使用的是wxWidgets UI库)的免费软件之间：</p><ol><li><a>MinGW Developer Studio</a>使用感觉还不错。有预编译的wxWidgets库；入门方便(编译wxWidgets库遇到的问题多多，后面慢慢讲)</li><li>Code::Blocks Studio提供插件接口而且最重要的是更新快。这方面<a>MinGW Developer Studio</a>就差多了，活跃的开发团队是开源项目发展的关键！</li></ol><p>当然差别还有很多。我是菜菜鸟看得到的就这些。。。</p><p><strong>安装Code::Blocks Studio</strong></p><p>Code::Blocks Studio现在<a>发布的是</a>RC2<a>(还没有正式版)。</a>但RC2问题多多(我发现的就有对Unicode编译的支持问题)；不过有<a>Nightly Builds</a>可以解决。我的解决步骤是：</p><ol><li>先下载并安装<a href="http://prdownloads.sourceforge.net/codeblocks/codeblocks-1.0rc2_mingw.exe?download" target="_blank">RC2整合MingW的版本</a>，这样也就不用再去下载MingW(MingW下载包太多了，安装头痛)</li><li>下载<a href="http://forums.codeblocks.org/index.php?board=20.0" target="_blank">Nightly Builds</a>(现在登陆C::B这个论坛要注册，前几天都还可以匿名的)中的</li><li><ol><li><a href="http://download.berlios.de/codeblocks/wxmsw26u_gcc_cb.7z" target="_blank">Unicode wxWidget动态支持库</a>(新版的C::B已经使用Unicodede发布)</li><li>C::B的<a>Nightly Builds</a>，我下的是<a href="http://download.berlios.de/codeblocks/CB_20jan2006_rev1823_win32.7z" target="_blank">2006/1/20号的rev1823</a></li></ol></li><li>将两个包中文文件解压覆盖到<em>C:\Program Files\CodeBlocks</em></li></ol><p><strong>安装wxWdigets</strong></p><ol><li>我在<a href="http://www.wxwidgets.org/downld2.htm" target="_blank">wxWidgets官方下载页面</a>上下载的<a href="http://prdownloads.sourceforge.net/wxwindows/wxMSW-2.6.2.zip" target="_blank">wxMSW v2.6.2 的ZIP版</a></li><li>解到<em>D:\</em>(安装完成后的路径为：<em>D:\wxWidgets-2.6.2</em>，之后的设置都用的是这个路径)</li></ol><p><strong>编译wxWdigets(支持ODBC)</strong></p><ol dir="ltr"><li>首先编辑<em>D:\wxWidgets-2.6.2\include\wx\msw\setup.h</em>以便编译后的动/静态库文件支持ODBC(为了让编译出来的库支持ODBC，我至少编译了4次才找到原来还要在这儿修改。虽然wxWidgets的手册上写要修改setup.h不过没有具体说是那个目录下的。。。吐血)。修改内容如下：</li><li><ul><li>将文件中的<code>#define wxUSE_ODBC 0</code>修改为<code>#define wxUSE_ODBC 1</code></li></ul></li><li>然后我在<em>D:\wxWidgets-2.6.2\build\msw</em>下创建了一个<em><strong>envset.bat</strong></em>文件来设置编译需要的环境参数。</li><li><ol><li>内容如下<blockquote><p><font face="Courier New"><code><font face="Courier New">set PATH=%PATH%;C:\Program Files\CodeBlocks\bin;C:\Program Files\CodeBlocks\mingw32\bin;<br />set LIBRARY_PATH=C:\Program Files\CodeBlocks\lib<br />set C_INCLUDE_PATH=C:\Program Files\CodeBlocks\include<br />set CPLUS_INCLUDE_PATH=C:\Program Files\CodeBlocks\include;D:\wxWidgets-2.6.2\include;D:\wxWidgets-2.6.2\contrib\include;</font></code></font></p></blockquote></li><li>其中<em>C:\Program Files\CodeBlocks</em>是我的C::B的安装路径</li></ol></li><li>同时修改<em>D:\wxWidgets-2.6.2\build\msw\config.gcc</em></li><li><ul><li>将<code>USE_ODBC = 0</code>修改为<code>USE_ODBC = 1</code></li></ul></li><li>进入DOS命令行</li><li>切换工作路径至<em>D:\wxWidgets-2.6.2\build\msw</em></li><li>运行<strong><em>envset.net</em></strong></li><li>执行清理命令<blockquote><p><code>mingw32-make -f makefile.gcc USE_XRC=1 SHARED=1 MONOLITHIC=1 BUILD=debug UNICODE=1 clean</code></p></blockquote></li><li><ul><li>其中</li><li><ol><li>SHARED=1表示生成的动态链接库DLL，0就是静态链接库</li><li>MONOLITHIC=1表示生成单一的库文件，0表示生成多个按模块分割的库文件</li><li>BUILD=debug表示生成带Debug信息的版本方便调试，release是发布版</li><li>UNICODE=1表示使用unicode编码</li></ol></li></ul></li><li>执行编译命令<blockquote><p><code>mingw32-make -f makefile.gcc USE_XRC=1 SHARED=1 MONOLITHIC=1 BUILD=debug UNICODE=1 VENDOR=cb</code></p></blockquote></li><li>看看电视，泡壶茶。编译的时间可不短;-)</li></ol><p><strong>整合C::B和wxWidgets</strong></p><ol dir="ltr"><li>运行C::B。程序会提示你填写wxWidgets的安装目录</li><li><ul><li><a href="http://www.flord.net/files/113785018509_1.png"><img alt="codeblock-wx-global-var-set.png" border="0" id="113785018509.png" src="http://www.flord.net/files/113785018509_tn_1.jpg" title="codeblock-wx-global-var-set.png" /></a></li></ul></li><li>然后使用新建向导创建一个<strong>Using UNICODE wxWidgets DLL</strong>的wxWidgets Appliction就可以开始了</li><li><div><a href="http://www.flord.net/files/113785466329_1.png"><img alt="codeblock-wx-create-project.png" border="0" id="113785466329.png" src="http://www.flord.net/files/113785466329_tn_1.jpg" title="codeblock-wx-create-project.png" /></a></div></li></ol><p><br />有点晚了，关于C::B中的wxWidgets项目配置方面的改天再写。。。</p>
