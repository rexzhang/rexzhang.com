
Drupal 4.7.3->5.0 Upgrade tips
############################################################


:author: Rex Zhang
:date: 2007-01-25T12:20:44+08:00
:modified: 2007-01-25T12:20:44+08:00
:status: hidden
:category: 运维
:tags: Drupal


<p>这次升级对管理系统变化很大，强烈建议升级前把 Theme 回复到系统默认的bluemarine。并且关掉所有非官方模块（即便这些模块已经有了支持5.0的版本）</p><p>5.0的一个重大的改变就是，把系统文件升级（上传）后可以直接进入系统，以及管理界面。然后再升级数据库。之前的版本是必须先升级数据库，然后才能在Web上进行管理。</p><p>建议把PHP内存限制由8MB提高到16MB，不然很可能导致升级失败</p><p><br />5.0对模块提供了卸载功能（当前只有部分模块支持）。如果对升级非官方模块没信心或者升级出问题。可以用卸载，再激活，再卸载，再激活的手段解决很多模块升级导致的系统锁死问题</p><p>对第3方模块建议逐个的激活，配置。如果因为激活或者配置导致系统锁死，可以在数据库中找表system中的status字段，将其修改为0即关闭了这个模块。再用上面的方法解决问题。</p><p>升级遇到提示"/includes/common.inc(1342) : eval()'d code on line 2"错误建议参考<a href="http://drupal.org/node/110721">官方网站上的解决方案</a>。在配合phpmyadmin中执行提示的那3条SQL命令。找到引发问题的设置，如果导致出问题的是自定义Block，建议直接删除哪条Block定义。一般就可直接解决。</p>
