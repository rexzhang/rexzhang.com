
Debian v3.1r0 下架设Apache2 + PHP4 + MySQL + mmCache + Zend环境
####################################################################################################################


:author: Rex Zhang
:date: 2005-07-26T00:05:57+08:00
:modified: 2005-07-26T00:05:57+08:00
:status: hidden
:category: Linux
:tags: Debian


<p>1.安装Apache2以及MySQL,PHP4以Apache2的模块的方式运行</p><blockquote dir="ltr" style="margin-right: 0px;"><p>aptitude install apache2-common apache2-mpm-prefork libapache2-mod-php4 mysql-server php4-mysql php4-gd phpmyadmin</p><p>其中phpadmin是一个基于web界面的MySQL管理工具.另外,在这一版的Debian中,安装PHP等跟Apache相关的程序时都会询问与那个版本的Apache关联(以方便安装程序进行自动配置),只需要选Apache2即可.</p></blockquote><p>2. 修改 /etc/php4/apache2/php.ini 使PHP可以存取MySQL数据库</p><blockquote dir="ltr" style="margin-right: 0px;"><p>把<br />#extension=mysql.so</p><p>改成<br />extension=mysql.so</p></blockquote><p>3. 设置MySQL root帐号初始秘密码</p><blockquote dir="ltr" style="margin-right: 0px;"><p>可先用命令检查是否有密码</p><p>LS1:~#mysqladmin version</p><p>在没有设置密码时,会显示版本信息.一旦设置了root帐号密码,就会提示存取限制错误</p><p>LS1:~#mysqladmin password YourPassword</p></blockquote><p>4.安装PHP网页缓存引擎(Cache Engine)mmCache</p><p dir="ltr">因为mmCache现在还处于unstable阶段,所以不使用变通手段是无法直接获取的.当然如果你用的源是unstable或者是test.那就另当别论了.</p><blockquote dir="ltr" style="margin-right: 0px;"><p>获取mmCache安装包.</p><p>LS1:~#cd /tmp<br />LS1:~#wget <a href="http://debian.cn99.com/debian/pool/main/t/turck-mmcache/turck-mmcache_2.4.6-12_i386.deb">http://debian.cn99.com/debian/pool/main/t/turck-mmcache/turck-mmcache_2.4.6-12_i386.deb</a></p><p>因为版本更新的缘故,具体的文件名需要在 <a href="http://debian.cn99.com/debian/pool/main/t/turck-mmcache">http://debian.cn99.com/debian/pool/main/t/turck-mmcache</a> 确认一下.主要是版本号可能有变化.</p><p>安装mmCache包</p><p>LS1:~#dpkg -i turck-mmcache_2.4.6-12_i386.deb</p><p>因为mmCache的默认安装是Apache,Apache2需要手动添加配置信息(可能就是这个缘故没有进stable).配置的方法可参考 <a href="http://turck-mmcache.sourceforge.net/index_old.html">http://turck-mmcache.sourceforge.net/index_old.html</a></p><p>LS1:~#nano /etc/php4/apache2/php.ini</p><p>添加如下信息<br />####mmCache###########################<br />extension="mmcache.so"<br />mmcache.shm_size="16"<br />mmcache.cache_dir="/tmp/mmcache"<br />mmcache.enable="1"<br />mmcache.optimizer="1"<br />mmcache.check_mtime="1"<br />mmcache.debug="0"<br />mmcache.filter=""<br />mmcache.shm_max="0"</p><p>创建mmCache的保存缓存文件的目录</p><p>LS1:~#mkdir /tmp/mmcache<br />LS1:~#chmod 0777 /tmp/mmcache</p></blockquote><p>5.安装Zend Optimizer</p><p>因为Molyx使用Zend Optimizer对其PHP源代码进行了加密.所以必须安装Zend Optimizer才能够工作.如果没有这个要求.个人觉得没有必要再安装Zend Optimizer.因为其包含的缓存加速功能mmCache已经提供了. </p><blockquote dir="ltr" style="margin-right: 0px;"><p>下载</p><p>LS1:~#cd /tmp<br />LS1:~#wget <a href="http://downloads.zend.com/optimizer/2.5.7/ZendOptimizer-2.5.7-linux-glibc21-i386.tar.gz">http://downloads.zend.com/optimizer/2.5.7/ZendOptimizer-2.5.7-linux-glibc21-i386.tar.gz</a></p><p>安装</p><p>LS1:~#tar -zxvf  ZendOptimizer-2.5.7-linux-glibc21-i386.tar.gz<br />LS1:~#cd ZendOptimizer-2.5.7-linux-glibc21-i386<br />LS1:~#sh install.sh</p><p>同样可到Zend的下载页面 <a href="http://downloads.zend.com/optimizer/">http://downloads.zend.com/optimizer/</a> 查找最新版安装包文件名</p><p>安装完毕后,会提示php.ini配置文件移动到了/usr/local/Zend/etc</p></blockquote><p dir="ltr">6.重启Apache</p><blockquote dir="ltr" style="margin-right: 0px;"><p dir="ltr">LS1:~# /etc/init.d/apache2 restart</p></blockquote><p dir="ltr">7.检验php配置</p><blockquote dir="ltr" style="margin-right: 0px;"><p dir="ltr">首先创建一个测试文件<br />LS1:~# nano /var/www/test.php</p><p dir="ltr">内容如下<br /><?php phpinfo()?></p><p dir="ltr">按Ctrl+X,y,回车.保存并退出</p><p dir="ltr">使用浏览器访问<br /><a href="http://yourdebianipaddress/test.php">http://yourDebianIPAddress/test.php</a></p><p dir="ltr">如一切正常的话,就会有相应的PHP环境显示.</p></blockquote>
